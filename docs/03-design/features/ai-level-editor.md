# ç¼–è¾‘å™¨åŠŸèƒ½ï¼šAI å¯¹è¯å¼å…³å¡ç¼–è¾‘

| æ–‡æ¡£çŠ¶æ€ | ä½œè€… | æ—¥æœŸ | å¯¹åº”ç‰ˆæœ¬ |
| :--- | :--- | :--- | :--- |
| **Implemented** | AI Assistant | 2026-01-22 | v2.1 |

## 1. æ¦‚è¿° (Overview)

AI å¯¹è¯å¼å…³å¡ç¼–è¾‘å…è®¸ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°æ¥åˆ›å»ºå’Œä¿®æ”¹å…³å¡ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œå¤æ‚çš„ UI æ§ä»¶ã€‚

### 1.1 åŠŸèƒ½å®šä½

| ç”¨é€” | æè¿° |
| :--- | :--- |
| **å¿«é€ŸåŸå‹** | é€šè¿‡æè¿°å¿«é€Ÿç”Ÿæˆå…³å¡è‰ç¨¿ |
| **æ‰¹é‡æ“ä½œ** | "æŠŠæ•´ä¸ªç¬¬ä¸€è¡Œéƒ½è®¾ä¸ºå†°å—" ç­‰æ‰¹é‡ä¿®æ”¹ |
| **å‚æ•°è°ƒæ•´** | è‡ªç„¶è¯­è¨€è°ƒæ•´æ­¥æ•°ã€ç›®æ ‡ç­‰å‚æ•° |
| **å…³å¡åˆ†æ** | è°ƒç”¨åˆ†æå·¥å…·è·å–èƒœç‡ã€ç“¶é¢ˆç­‰æŒ‡æ ‡ |
| **å­¦ä¹ è¾…åŠ©** | æ–°æ‰‹å¯é€šè¿‡å¯¹è¯äº†è§£å…³å¡è®¾è®¡ |

### 1.2 æ ¸å¿ƒç‰¹æ€§

- **Function Calling**ï¼šåŸç”Ÿå·¥å…·è°ƒç”¨ï¼Œå¯é æ€§é«˜äº JSON è§£æ
- **è‡ªç„¶è¯­è¨€ç†è§£**ï¼šæ”¯æŒä¸­æ–‡è‡ªç„¶è¯­è¨€è¾“å…¥
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šAI äº†è§£å½“å‰å…³å¡çŠ¶æ€
- **åˆ†æé›†æˆ**ï¼šå¯ç›´æ¥è°ƒç”¨å…³å¡åˆ†æå’Œæ·±åº¦åˆ†æ
- **å¯æ’æ‹”æ¶æ„**ï¼šæ”¯æŒå¤šç§ LLM æä¾›å•†ï¼ˆDeepSeek/OpenAI/Claudeï¼‰

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ¶æ„å›¾ (v2.0 Function Calling)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI å¯¹è¯å¼å…³å¡ç¼–è¾‘ç³»ç»Ÿ v2.0                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚              Match3.Web (Blazor)                         â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚  AIChatPanel.razor                                â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  â€¢ æµ®åŠ¨èŠå¤©çª—å£ UI                                 â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  â€¢ æ¶ˆæ¯åˆ—è¡¨å±•ç¤º                                    â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  â€¢ è¾“å…¥æ¡†å’Œå‘é€æŒ‰é’®                                â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                         â”‚                                â”‚   â”‚
â”‚   â”‚                         â–¼                                â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚  WebLevelAIChatService                            â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  â€¢ Function Calling å·¥å…·è°ƒç”¨å¾ªç¯                   â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  â€¢ å·¥å…·ç»“æœ â†’ LevelIntent è½¬æ¢                    â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  â€¢ åˆ†æå·¥å…·ç›´æ¥æ‰§è¡Œ                                â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                         â”‚                                â”‚   â”‚
â”‚   â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â”‚
â”‚   â”‚         â–¼               â–¼               â–¼               â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚ToolRegistryâ”‚ â”‚ ILLMClient â”‚ â”‚ Analysis Services  â”‚  â”‚   â”‚
â”‚   â”‚  â”‚ 19ä¸ªå·¥å…·   â”‚ â”‚ (å¯æ’æ‹”)   â”‚ â”‚ â€¢ LevelAnalysis    â”‚  â”‚   â”‚
â”‚   â”‚  â”‚ å®šä¹‰      â”‚ â”‚            â”‚ â”‚ â€¢ DeepAnalysis     â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚              Match3.Editor (.NET Standard 2.1)           â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚  LevelAIChatViewModel                             â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  â€¢ å¯¹è¯çŠ¶æ€ç®¡ç†                                    â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  â€¢ æ¶ˆæ¯å†å²                                        â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  â€¢ å‘é€/æ¥æ”¶æ¶ˆæ¯                                   â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                         â”‚                                â”‚   â”‚
â”‚   â”‚                         â–¼                                â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚  IntentExecutor                                   â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  â€¢ è§£æ LevelIntent                               â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  â€¢ è°ƒç”¨ ViewModel/GridManipulator æ‰§è¡Œæ“ä½œ        â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Function Calling æµç¨‹

```
ç”¨æˆ·è¾“å…¥: "åˆ†æä¸€ä¸‹è¿™ä¸ªå…³å¡ï¼Œç„¶åæŠŠç½‘æ ¼æ”¹æˆ 10x10"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WebLevelAIChatService.SendMessageAsync()                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Round 1:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ LLM API Call    â”‚â”€â”€â”€â–¶â”‚ Response: tool_calls                â”‚â”‚
â”‚  â”‚ + tools[]       â”‚    â”‚ â€¢ analyze_level {}                  â”‚â”‚
â”‚  â”‚ + messages[]    â”‚    â”‚ â€¢ set_grid_size {width:10,height:10}â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ å¤„ç†å·¥å…·è°ƒç”¨:                                                â”‚â”‚
â”‚  â”‚ â€¢ analyze_level â†’ æ‰§è¡Œåˆ†æï¼Œè¿”å›ç»“æœæ–‡æœ¬                     â”‚â”‚
â”‚  â”‚ â€¢ set_grid_size â†’ è½¬æ¢ä¸º LevelIntentï¼Œæ”¶é›†åˆ° allIntents     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  Round 2:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ LLM API Call    â”‚â”€â”€â”€â–¶â”‚ Response: content (æœ€ç»ˆå›å¤)         â”‚â”‚
â”‚  â”‚ + tool_results  â”‚    â”‚ "å·²åˆ†æå®Œæˆå¹¶è°ƒæ•´äº†ç½‘æ ¼å¤§å°..."       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
è¿”å›: { message, intents: [SetGridSize], analysisResults }
```

### 2.3 æ–‡ä»¶æ¸…å•

| å±‚ | æ–‡ä»¶ | èŒè´£ |
| :--- | :--- | :--- |
| **Editor** | `Interfaces/ILevelAIChatService.cs` | AI æœåŠ¡æ¥å£å®šä¹‰ |
| **Editor** | `Models/AIChatModels.cs` | æ•°æ®æ¨¡å‹ï¼ˆLevelContext, AIChatResponse, LevelIntentï¼‰ |
| **Editor** | `Models/ChatMessage.cs` | èŠå¤©æ¶ˆæ¯æ¨¡å‹ |
| **Editor** | `Logic/IntentExecutor.cs` | æ„å›¾æ‰§è¡Œå™¨ |
| **Editor** | `Logic/LevelContextBuilder.cs` | å…³å¡ä¸Šä¸‹æ–‡æ„å»ºå™¨ |
| **Editor** | `ViewModels/LevelAIChatViewModel.cs` | å¯¹è¯ ViewModel |
| **Web** | `Services/AI/LLMOptions.cs` | LLM é…ç½®é€‰é¡¹ |
| **Web** | `Services/AI/ILLMClient.cs` | LLM å®¢æˆ·ç«¯æ¥å£ |
| **Web** | `Services/AI/FunctionCallingModels.cs` | **[æ–°] Function Calling æ•°æ®æ¨¡å‹** |
| **Web** | `Services/AI/ToolRegistry.cs` | **[æ–°] å·¥å…·å®šä¹‰æ³¨å†Œè¡¨** |
| **Web** | `Services/AI/OpenAICompatibleClient.cs` | OpenAI å…¼å®¹å®¢æˆ·ç«¯ |
| **Web** | `Services/AI/WebLevelAIChatService.cs` | AI æœåŠ¡å®ç° |
| **Web** | `Components/.../AIChatPanel.razor` | èŠå¤© UI ç»„ä»¶ |

### 2.4 æ¥å£å®šä¹‰

```csharp
// ILLMClient.cs - æ”¯æŒ Function Calling
public interface ILLMClient
{
    bool IsAvailable { get; }

    Task<LLMResponse> SendAsync(
        IReadOnlyList<LLMMessage> messages,
        CancellationToken cancellationToken = default);

    Task<LLMResponse> SendWithToolsAsync(
        IReadOnlyList<LLMMessage> messages,
        IReadOnlyList<ToolDefinition> tools,
        CancellationToken cancellationToken = default);

    IAsyncEnumerable<string> SendStreamAsync(
        IReadOnlyList<LLMMessage> messages,
        CancellationToken cancellationToken = default);
}
```

```csharp
// LLMMessage - æ”¯æŒå·¥å…·è°ƒç”¨
public class LLMMessage
{
    public string Role { get; set; }
    public string? Content { get; set; }
    public List<ToolCall>? ToolCalls { get; set; }      // assistant æ¶ˆæ¯
    public string? ToolCallId { get; set; }              // tool æ¶ˆæ¯

    public static LLMMessage System(string content);
    public static LLMMessage User(string content);
    public static LLMMessage Assistant(string content);
    public static LLMMessage AssistantWithToolCalls(List<ToolCall> toolCalls);
    public static LLMMessage Tool(string toolCallId, string content);
}
```

## 3. å·¥å…·å®šä¹‰

### 3.1 ç¼–è¾‘å·¥å…· (15ä¸ª)

| å·¥å…·å | å‚æ•° | æè¿° |
| :--- | :--- | :--- |
| `set_grid_size` | width, height | è®¾ç½®ç½‘æ ¼å¤§å° (3-12) |
| `set_move_limit` | moves | è®¾ç½®æ­¥æ•°é™åˆ¶ (1-99) |
| `set_objective` | index?, layer, element_type, count | è®¾ç½®/æ·»åŠ ç›®æ ‡ |
| `add_objective` | layer, element_type, count | æ·»åŠ æ–°ç›®æ ‡ |
| `remove_objective` | index | ç§»é™¤ç›®æ ‡ |
| `paint_tile` | x, y, tile_type, bomb_type? | ç»˜åˆ¶å•ä¸ªæ ¼å­ |
| `paint_tile_region` | x1, y1, x2, y2, tile_type, bomb_type? | ç»˜åˆ¶åŒºåŸŸ |
| `paint_cover` | x, y, cover_type | æ”¾ç½®è¦†ç›–ç‰© |
| `paint_cover_region` | x1, y1, x2, y2, cover_type | åŒºåŸŸè¦†ç›–ç‰© |
| `paint_ground` | x, y, ground_type | æ”¾ç½®åœ°é¢ |
| `paint_ground_region` | x1, y1, x2, y2, ground_type | åŒºåŸŸåœ°é¢ |
| `place_bomb` | x, y, bomb_type, tile_type? | æ”¾ç½®ç‚¸å¼¹ (-1 è¡¨ç¤ºä¸­å¿ƒ) |
| `generate_random_level` | - | éšæœºç”Ÿæˆå…³å¡ |
| `clear_region` | x1, y1, x2, y2 | æ¸…ç©ºåŒºåŸŸ |
| `clear_all` | - | æ¸…ç©ºæ•´ä¸ªç½‘æ ¼ |

### 3.2 åˆ†æå·¥å…· (3ä¸ª)

| å·¥å…·å | å‚æ•° | æè¿° |
| :--- | :--- | :--- |
| `analyze_level` | simulation_count? | å¿«é€Ÿåˆ†æï¼šèƒœç‡ã€æ­»é”ç‡ã€å¹³å‡æ­¥æ•° |
| `deep_analyze` | simulations_per_tier? | æ·±åº¦åˆ†æï¼šåˆ†å±‚èƒœç‡ã€æŠ€èƒ½æ•æ„Ÿåº¦ã€æŒ«è´¥é£é™©ç­‰ |
| `get_bottleneck` | - | ç“¶é¢ˆåˆ†æï¼šæœ€éš¾ç›®æ ‡å’Œå¤±è´¥åŸå›  |

### 3.3 è·¯ç”±å·¥å…· (1ä¸ª)

| å·¥å…·å | å‚æ•° | æè¿° |
| :--- | :--- | :--- |
| `need_deep_thinking` | reason, task_summary | è§¦å‘æ·±åº¦æ€è€ƒæ¨¡å¼ï¼Œé€‚ç”¨äºå¤æ‚è®¾è®¡ä»»åŠ¡ |

**è§¦å‘æ¡ä»¶**ï¼š
- ç”¨æˆ·è¯·æ±‚éœ€è¦æ·±åº¦åˆ›æ„è®¾è®¡
- å¤æ‚åˆ†ææˆ–é—®é¢˜è¯Šæ–­
- å¼€æ”¾å¼å»ºè®®æˆ–ä¼˜åŒ–
- "å¸®æˆ‘è®¾è®¡ä¸€ä¸ªæœ‰è¶£çš„å…³å¡" ç­‰åˆ›æ„æ€§ä»»åŠ¡

**ä¸é€‚ç”¨äº**ï¼š
- ç®€å•çš„å‚æ•°ä¿®æ”¹ï¼ˆå¦‚ "æŠŠæ­¥æ•°æ”¹æˆ 20"ï¼‰
- ç›´æ¥çš„ç¼–è¾‘æ“ä½œï¼ˆå¦‚ "åœ¨å·¦ä¸Šè§’æ”¾ä¸€ä¸ªç‚¸å¼¹"ï¼‰

### 3.4 å¯ç”¨å…ƒç´ 

| ç±»å‹ | å¯é€‰å€¼ |
| :--- | :--- |
| **tile_type** | Red, Green, Blue, Yellow, Purple, Orange, Rainbow, None |
| **bomb_type** | None, Horizontal, Vertical, Color, Ufo, Square5x5 |
| **cover_type** | None, Cage, Chain, Bubble |
| **ground_type** | None, Ice |
| **layer** | Tile, Cover, Ground |
| **element_type** | æ•´æ•°ç´¢å¼• (è§ä¸‹è¡¨) |

#### element_type ç´¢å¼•å¯¹ç…§

| Layer | ç´¢å¼• | å…ƒç´  |
| :--- | :--- | :--- |
| Tile | 0 | Red |
| Tile | 1 | Green |
| Tile | 2 | Blue |
| Tile | 3 | Yellow |
| Tile | 4 | Purple |
| Tile | 5 | Orange |
| Tile | 6 | Rainbow |
| Cover | 0 | Cage |
| Cover | 1 | Chain |
| Cover | 2 | Bubble |
| Ground | 0 | Ice |

## 4. ç”¨ä¾‹ç¤ºä¾‹

### 4.1 åŸºç¡€ç¼–è¾‘

**ç”¨æˆ·**: æŠŠç½‘æ ¼æ”¹æˆ 10x10

**AI å·¥å…·è°ƒç”¨**:
```json
{
  "name": "set_grid_size",
  "arguments": {"width": 10, "height": 10}
}
```

**AI å›å¤**: å·²å°†ç½‘æ ¼å¤§å°è°ƒæ•´ä¸º 10x10ã€‚

---

**ç”¨æˆ·**: ç›®æ ‡æ˜¯æ¶ˆé™¤ 30 ä¸ªçº¢è‰²æ–¹å—å’Œ 20 ä¸ªè“è‰²æ–¹å—

**AI å·¥å…·è°ƒç”¨**:
```json
[
  {"name": "set_objective", "arguments": {"layer": "Tile", "element_type": 0, "count": 30}},
  {"name": "add_objective", "arguments": {"layer": "Tile", "element_type": 2, "count": 20}}
]
```

**AI å›å¤**: å·²è®¾ç½®ç›®æ ‡ï¼šæ¶ˆé™¤ 30 ä¸ªçº¢è‰²æ–¹å—å’Œ 20 ä¸ªè“è‰²æ–¹å—ã€‚

---

**ç”¨æˆ·**: åœ¨ä¸­é—´æ”¾ä¸€ä¸ªå½©è™¹ç‚¸å¼¹

**AI å·¥å…·è°ƒç”¨**:
```json
{
  "name": "place_bomb",
  "arguments": {"x": -1, "y": -1, "bomb_type": "Color", "tile_type": "Rainbow"}
}
```

**AI å›å¤**: å·²åœ¨ç½‘æ ¼ä¸­å¿ƒæ”¾ç½®å½©è™¹ç‚¸å¼¹ã€‚

### 4.2 åŒºåŸŸæ“ä½œ

**ç”¨æˆ·**: ç¬¬ä¸€è¡Œå…¨éƒ¨æ”¾å†°å—

**AI å·¥å…·è°ƒç”¨**:
```json
{
  "name": "paint_ground_region",
  "arguments": {"x1": 0, "y1": 0, "x2": 7, "y2": 0, "ground_type": "Ice"}
}
```

---

**ç”¨æˆ·**: å·¦ä¸‹è§’ 3x3 åŒºåŸŸæ”¾ç¬¼å­

**AI å·¥å…·è°ƒç”¨**:
```json
{
  "name": "paint_cover_region",
  "arguments": {"x1": 0, "y1": 5, "x2": 2, "y2": 7, "cover_type": "Cage"}
}
```

### 4.3 å…³å¡åˆ†æ

**ç”¨æˆ·**: åˆ†æä¸€ä¸‹è¿™ä¸ªå…³å¡

**AI å·¥å…·è°ƒç”¨**:
```json
{
  "name": "analyze_level",
  "arguments": {"simulation_count": 500}
}
```

**AI å›å¤**:
```
## å…³å¡åˆ†æç»“æœ
- æ¨¡æ‹Ÿæ¬¡æ•°: 500
- èƒœç‡: 68.2%
- æ­»é”ç‡: 3.4%
- å¹³å‡ä½¿ç”¨æ­¥æ•°: 17.3
- éš¾åº¦è¯„çº§: Medium
- åˆ†æè€—æ—¶: 1234ms
```

---

**ç”¨æˆ·**: åšä¸€ä¸ªæ·±åº¦åˆ†æ

**AI å·¥å…·è°ƒç”¨**:
```json
{
  "name": "deep_analyze",
  "arguments": {"simulations_per_tier": 250}
}
```

**AI å›å¤**:
```
## æ·±åº¦åˆ†æç»“æœ

### åˆ†å±‚èƒœç‡
- Beginner: 82.4%
- Average: 67.2%
- Expert: 51.6%

### å…³é”®æŒ‡æ ‡
- æŠ€èƒ½æ•æ„Ÿåº¦: 31% (é«˜=æŠ€èƒ½å…³, ä½=è¿æ°”å…³)
- è¿æ°”ä¾èµ–åº¦: 28% (ç†æƒ³èŒƒå›´: 20-40%)
- æŒ«è´¥é£é™©: 12.3% (è¿ç»­3å±€å¤±è´¥æ¦‚ç‡)
- P95é€šå…³æ¬¡æ•°: 4æ¬¡ (95%ç©å®¶åœ¨æ­¤æ¬¡æ•°å†…é€šå…³)

### ç“¶é¢ˆç›®æ ‡
- æœ€éš¾ç›®æ ‡: Tile-Blue (å å¤±è´¥çš„ 45%)
```

---

**ç”¨æˆ·**: ç“¶é¢ˆåœ¨å“ªé‡Œï¼Ÿ

**AI å·¥å…·è°ƒç”¨**:
```json
{
  "name": "get_bottleneck",
  "arguments": {}
}
```

**AI å›å¤**:
```
## ç“¶é¢ˆåˆ†æ
- ç“¶é¢ˆç›®æ ‡: Tile-Blue
- å¤±è´¥å æ¯”: 45%

### å»ºè®®
- è¯¥ç›®æ ‡æ˜¯ä¸»è¦å¤±è´¥åŸå› ï¼Œå»ºè®®é™ä½ç›®æ ‡æ•°é‡æˆ–å¢åŠ æ­¥æ•°
```

### 4.4 å¤åˆæ“ä½œ

**ç”¨æˆ·**: å¸®æˆ‘è®¾è®¡ä¸€ä¸ªç®€å•çš„æ–°æ‰‹å…³ï¼š8x8 ç½‘æ ¼ï¼Œ25 æ­¥ï¼Œç›®æ ‡æ˜¯æ¶ˆé™¤ 20 ä¸ªçº¢è‰²æ–¹å—

**AI å·¥å…·è°ƒç”¨**:
```json
[
  {"name": "set_grid_size", "arguments": {"width": 8, "height": 8}},
  {"name": "set_move_limit", "arguments": {"moves": 25}},
  {"name": "set_objective", "arguments": {"layer": "Tile", "element_type": 0, "count": 20}},
  {"name": "generate_random_level", "arguments": {}}
]
```

**AI å›å¤**: å·²åˆ›å»ºæ–°æ‰‹å…³å¡ï¼š8x8 ç½‘æ ¼ï¼Œ25 æ­¥ï¼Œç›®æ ‡æ¶ˆé™¤ 20 ä¸ªçº¢è‰²æ–¹å—ï¼Œå¹¶éšæœºç”Ÿæˆäº†åˆå§‹å¸ƒå±€ã€‚

## 5. ç”¨æˆ·ç•Œé¢

### 5.1 æµ®åŠ¨èŠå¤©çª—å£

- **ä½ç½®**ï¼šå³ä¾§å›ºå®šæµ®åŠ¨
- **å®½åº¦**ï¼š360px
- **ç»„ä»¶**ï¼šæ¶ˆæ¯åˆ—è¡¨ + è¾“å…¥åŒºåŸŸ
- **æŠ˜å **ï¼šç‚¹å‡»æŒ‰é’®å¯æ˜¾ç¤º/éšè—

### 5.2 æ¶ˆæ¯ç±»å‹

| ç±»å‹ | æ ·å¼ | è¯´æ˜ |
| :--- | :--- | :--- |
| ç”¨æˆ·æ¶ˆæ¯ | è“è‰²èƒŒæ™¯ï¼Œå³å¯¹é½ | ç”¨æˆ·è¾“å…¥ |
| AI å›å¤ | æ·±è‰²èƒŒæ™¯ï¼Œå·¦å¯¹é½ | AI å“åº”æ–‡æœ¬ |
| åˆ†æç»“æœ | Markdown æ ¼å¼ | åˆ†æå·¥å…·è¾“å‡º |
| é”™è¯¯æ¶ˆæ¯ | çº¢è‰²è¾¹æ¡† | è¯·æ±‚å¤±è´¥æˆ–å–æ¶ˆ |
| æ„å›¾æ ‡ç­¾ | å°å¾½ç«  | æ˜¾ç¤ºæ‰§è¡Œçš„æ“ä½œ |

### 5.3 äº¤äº’çŠ¶æ€

| çŠ¶æ€ | UI è¡¨ç° |
| :--- | :--- |
| ç©ºé—² | è¾“å…¥æ¡†å¯ç”¨ï¼Œå‘é€æŒ‰é’®å¯ç”¨ |
| ç­‰å¾…å“åº” | è¾“å…¥æ¡†ç¦ç”¨ï¼Œæ˜¾ç¤ºåŠ è½½åŠ¨ç”» |
| AI ä¸å¯ç”¨ | æ˜¾ç¤ºè­¦å‘Šæç¤º |

## 6. æ·±åº¦æ€è€ƒæ¨¡å¼ (v2.1)

### 6.1 æ¦‚è¿°

æ·±åº¦æ€è€ƒæ¨¡å¼åˆ©ç”¨ DeepSeek R1 æ¨ç†æ¨¡å‹å¤„ç†å¤æ‚çš„å…³å¡è®¾è®¡ä»»åŠ¡ã€‚å½“ AI åˆ¤æ–­ä»»åŠ¡éœ€è¦æ·±åº¦åˆ›æ„æˆ–å¤æ‚åˆ†ææ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘æ­¤æ¨¡å¼ã€‚

### 6.2 å·¥ä½œæµç¨‹

```
ç”¨æˆ·è¾“å…¥: "å¸®æˆ‘è®¾è®¡ä¸€ä¸ªæœ‰è¶£çš„ä¸­ç­‰éš¾åº¦å…³å¡"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: è·¯ç”±åˆ¤æ–­                                               â”‚
â”‚  â€¢ Chat æ¨¡å‹è¯„ä¼°ä»»åŠ¡å¤æ‚åº¦                                        â”‚
â”‚  â€¢ è°ƒç”¨ need_deep_thinking { reason, task_summary }              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 2: æ·±åº¦æ€è€ƒ (DeepSeek R1)                                 â”‚
â”‚  â€¢ åˆ‡æ¢åˆ° ReasonerModel (deepseek-reasoner)                     â”‚
â”‚  â€¢ ç”Ÿæˆè¯¦ç»†è®¾è®¡æ–¹æ¡ˆï¼ˆç½‘æ ¼ã€æ­¥æ•°ã€ç›®æ ‡ã€å¸ƒå±€ï¼‰                       â”‚
â”‚  â€¢ é™åˆ¶è¾“å‡ºé•¿åº¦ (ReasonerMaxTokens = 1024)                       â”‚
â”‚  â€¢ UI æ˜¾ç¤º: "ğŸ’­ æ·±åº¦æ€è€ƒä¸­..."                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 3: æ‰§è¡Œé˜¶æ®µ                                               â”‚
â”‚  â€¢ åˆ‡æ¢å› Chat æ¨¡å‹                                              â”‚
â”‚  â€¢ å¯ç”¨ editOnlyMode (ç¦æ­¢åˆ†æå·¥å…·ï¼Œé˜²æ­¢å¾ªç¯)                     â”‚
â”‚  â€¢ æŒ‰æ–¹æ¡ˆè°ƒç”¨ç¼–è¾‘å·¥å…· (set_grid_size, set_objective, etc.)       â”‚
â”‚  â€¢ UI æ˜¾ç¤º: "æ‰§è¡Œæ“ä½œ..."                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 é…ç½®

```json
{
  "LLM": {
    "Model": "deepseek-chat",
    "ReasonerModel": "deepseek-reasoner",
    "ReasonerMaxTokens": 1024
  }
}
```

| å‚æ•° | è¯´æ˜ |
| :--- | :--- |
| `ReasonerModel` | æ¨ç†æ¨¡å‹åç§°ï¼Œä¸ºç©ºåˆ™ç¦ç”¨æ·±åº¦æ€è€ƒ |
| `ReasonerMaxTokens` | æ¨ç†è¾“å‡ºæœ€å¤§ token æ•°ï¼Œé™åˆ¶ç­‰å¾…æ—¶é—´ |

### 6.4 é€‚ç”¨åœºæ™¯

| åœºæ™¯ | ç¤ºä¾‹ |
| :--- | :--- |
| åˆ›æ„è®¾è®¡ | "è®¾è®¡ä¸€ä¸ªæœ‰è¶£çš„æ–°æ‰‹å¼•å¯¼å…³" |
| éš¾åº¦è°ƒä¼˜ | "è¿™ä¸ªå…³å¡å¤ªéš¾äº†ï¼Œå¸®æˆ‘ä¼˜åŒ–ä¸€ä¸‹" |
| ç»¼åˆå»ºè®® | "åˆ†æä¸€ä¸‹è¿™ä¸ªå…³å¡ï¼Œç»™å‡ºæ”¹è¿›å»ºè®®" |
| ä¸»é¢˜å…³å¡ | "è®¾è®¡ä¸€ä¸ªåœ£è¯èŠ‚ä¸»é¢˜çš„å…³å¡" |

## 7. é…ç½®

### 7.1 LLM é…ç½®é€‰é¡¹

```json
// appsettings.json
{
  "LLM": {
    "Provider": "DeepSeek",
    "BaseUrl": "https://api.deepseek.com/v1",
    "ApiKey": "sk-xxx",
    "Model": "deepseek-chat",
    "ReasonerModel": "deepseek-reasoner",
    "ReasonerMaxTokens": 1024,
    "MaxTokens": 2048,
    "Temperature": 0.7
  }
}
```

### 7.2 æ”¯æŒ Function Calling çš„æä¾›å•†

| Provider | BaseUrl | Function Calling æ”¯æŒ |
| :--- | :--- | :--- |
| DeepSeek | `https://api.deepseek.com/v1` | âœ… æ”¯æŒ |
| OpenAI | `https://api.openai.com/v1` | âœ… æ”¯æŒ |
| Azure OpenAI | `https://xxx.openai.azure.com/` | âœ… æ”¯æŒ |
| Ollama (éƒ¨åˆ†æ¨¡å‹) | `http://localhost:11434/v1` | âš ï¸ éœ€è¦æ”¯æŒ tools çš„æ¨¡å‹ |

## 7. é”™è¯¯å¤„ç†

| é”™è¯¯ç±»å‹ | å¤„ç†æ–¹å¼ |
| :--- | :--- |
| ç½‘ç»œé”™è¯¯ | æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼Œå…è®¸é‡è¯• |
| API å¯†é’¥æ— æ•ˆ | æç¤ºæ£€æŸ¥é…ç½® |
| å·¥å…·è°ƒç”¨å‚æ•°è§£æå¤±è´¥ | è¿”å›é”™è¯¯åˆ° LLMï¼Œè®©å…¶é‡è¯• |
| åˆ†ææœåŠ¡æœªé…ç½® | è¿”å›å‹å¥½æç¤º |
| è¾¾åˆ°æœ€å¤§è½®æ•° | è¿”å›å·²æ”¶é›†çš„ intents |

## 8. æ‰©å±•æ€§

### 8.1 æ·»åŠ æ–°å·¥å…·

1. åœ¨ `ToolRegistry.cs` æ·»åŠ å·¥å…·å®šä¹‰æ–¹æ³•
2. åœ¨ `GetAllTools()` æ·»åŠ è°ƒç”¨
3. å¦‚æœæ˜¯ç¼–è¾‘å·¥å…·ï¼Œåœ¨ `ToolNameToIntentType` æ·»åŠ æ˜ å°„
4. å¦‚æœæ˜¯åˆ†æå·¥å…·ï¼Œåœ¨ `AnalysisToolNames` æ·»åŠ åç§°
5. åœ¨ `WebLevelAIChatService` æ·»åŠ æ‰§è¡Œé€»è¾‘ï¼ˆåˆ†æå·¥å…·ï¼‰

### 8.2 æ·»åŠ æ–°çš„ LLM æä¾›å•†

1. å®ç° `ILLMClient` æ¥å£
2. å®ç° `SendWithToolsAsync()` æ–¹æ³•
3. åœ¨ `Program.cs` æ³¨å†ŒæœåŠ¡
4. é…ç½® `appsettings.json`

## 9. æµ‹è¯•

### 9.1 å•å…ƒæµ‹è¯•è¦†ç›–

| æµ‹è¯•åŒºåŸŸ | æµ‹è¯•æ•° | æµ‹è¯•å†…å®¹ |
| :--- | :--- | :--- |
| Tool Call Response | 4 | å·¥å…·è°ƒç”¨è§£æã€å¤šå·¥å…·è°ƒç”¨ã€æ— å·¥å…·è°ƒç”¨ã€API é”™è¯¯ |
| Tool Type | 2 | 16 ç§å·¥å…·ç±»å‹æ˜ å°„ã€æœªçŸ¥å·¥å…·è·³è¿‡ |
| Parameter Conversion | 4 | snake_caseâ†’camelCaseã€ç›®æ ‡å‚æ•°ã€åŒºåŸŸå‚æ•°ã€ä¸­å¿ƒåæ ‡ |
| ToolRegistry | 4 | å·¥å…·æ•°é‡ (19)ã€æ˜ å°„å®Œæ•´æ€§ã€åˆ†æå·¥å…·è¯†åˆ«ã€editOnly å·¥å…·é›† |
| Deep Thinking Mode | 3 | æ·±åº¦æ€è€ƒæµç¨‹ã€ReasonerModel æœªé…ç½®ã€editOnlyMode æ‹’ç»åˆ†æå·¥å…· |

**æ€»è®¡**: 31 ä¸ªæµ‹è¯•ï¼ˆå« Theory æ•°æ®ç‚¹ï¼‰

### 9.2 æ·±åº¦æ€è€ƒæµ‹è¯•åœºæ™¯

| æµ‹è¯• | éªŒè¯å†…å®¹ |
| :--- | :--- |
| `WithNeedDeepThinkingTool_TriggersDeepThinkingFlow` | R1 æ¨¡å‹è¢«è°ƒç”¨ã€`UsedDeepThinking=true` |
| `WithoutReasonerModel_SkipsDeepThinking` | ReasonerModel æœªé…ç½®æ—¶è·³è¿‡æ·±åº¦æ€è€ƒ |
| `InEditOnlyMode_RejectsAnalysisTools` | æ·±åº¦æ€è€ƒåå·¥å…·é›†ä¸å«åˆ†æå·¥å…· |

### 9.3 é›†æˆæµ‹è¯•åœºæ™¯

| åœºæ™¯ | éªŒè¯å†…å®¹ |
| :--- | :--- |
| "æŠŠç½‘æ ¼æ”¹æˆ 10x10" | `set_grid_size` è¢«è°ƒç”¨ï¼Œå‚æ•°æ­£ç¡® |
| "åˆ†æä¸€ä¸‹è¿™ä¸ªå…³å¡" | `analyze_level` è¢«è°ƒç”¨ï¼Œè¿”å›åˆ†æç»“æœ |
| "åœ¨ä¸­å¿ƒæ”¾ä¸€ä¸ªå½©è™¹ç‚¸å¼¹" | `place_bomb` å‚æ•°æ­£ç¡®ï¼Œcenter å¤„ç†æ­£ç¡® |
| å¤šå·¥å…·è°ƒç”¨ | å¤šä¸ªå·¥å…·æŒ‰é¡ºåºæ‰§è¡Œï¼Œintents éƒ½è¢«æ”¶é›† |
| "è®¾è®¡ä¸€ä¸ªæœ‰è¶£çš„å…³å¡" | è§¦å‘æ·±åº¦æ€è€ƒï¼ŒR1â†’Chatâ†’æ‰§è¡Œç¼–è¾‘å·¥å…· |

## 10. ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ |
| :--- | :--- | :--- |
| v1.0 | 2026-01-20 | åˆå§‹å®ç°ï¼šJSON å“åº”è§£æï¼Œ14 ç§æ„å›¾ç±»å‹ |
| v2.0 | 2026-01-21 | **é‡æ„ä¸º Function Calling**ï¼šåŸç”Ÿå·¥å…·è°ƒç”¨ï¼Œæ–°å¢ 3 ä¸ªåˆ†æå·¥å…·ï¼Œå…± 18 ä¸ªå·¥å…· |
| v2.1 | 2026-01-22 | **æ·±åº¦æ€è€ƒæ¨¡å¼**ï¼šé›†æˆ DeepSeek R1ï¼Œæ–°å¢ need_deep_thinking è·¯ç”±å·¥å…·ï¼Œå…± 19 ä¸ªå·¥å…· |
